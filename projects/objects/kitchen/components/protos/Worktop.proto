#VRML_SIM R2020a utf8
# license: Copyright Cyberbotics Ltd. Licensed for use only with Webots.
# license url: https://cyberbotics.com/webots_assets_license
# A customizable (size, texture, etc.) worktop.

PROTO Worktop [
  field SFVec3f    translation       0 0.71 0
  field SFRotation rotation          0 1 0 0
  field SFString   name              "worktop"
  field SFVec3f    size              0.4 0.06 0.7  # Defines the size of the worktop.
  field SFFloat    mass              0             # Defines the mass of the wooden box in kg. A value smaller or equal to 0 remove the physics of the wooden box.
  field SFFloat    IBLStrength       1             # Defines the strength of ambient lighting from the Background node.
]
{
  %{
    local size = fields.size.value
    local volume = size.x * size.y * size.z
    local mass = fields.mass.value

    if size.x <= 0.0 or size.y <= 0.0 or size.z <= 0.0 then
      size = fields.size.defaultValue
      io.stderr:write("'size' must contain positive values\n")
    end
    if mass < 0.0 then
      mass = fields.mass.defaultValue
      io.stderr:write("'mass' must contain positive values\n")
    end
  }%
  SolidBox {
    translation IS translation
    rotation IS rotation
    name IS name
    size IS size
    appearance Marble {
      IBLStrength IS IBLStrength
    }
    %{ if mass > 0 then }%
    physics Physics {
      density -1
      mass %{= mass}%
    }
    %{ end }%
  }
}
